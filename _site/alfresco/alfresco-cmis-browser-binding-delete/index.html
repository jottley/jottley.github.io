<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Alfresco&#58; CMIS Browser Binding DELETE example &#8211; I exist as I am</title>
<meta name="description" content="">
<meta name="keywords" content="Alfresco, CMIS, example">
<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://jared.ottleys.net/images/">
<meta name="twitter:title" content="Alfresco&#58; CMIS Browser Binding DELETE example">
<meta name="twitter:description" content="Something Something Something">
<meta name="twitter:creator" content="@jottley">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Alfresco&#58; CMIS Browser Binding DELETE example">
<meta property="og:description" content="Something Something Something">
<meta property="og:url" content="http://jared.ottleys.net/alfresco/alfresco-cmis-browser-binding-delete">
<meta property="og:site_name" content="I exist as I am">





<link rel="canonical" href="http://jared.ottleys.net/alfresco/alfresco-cmis-browser-binding-delete">
<link href="http://jared.ottleys.net/feed.xml" type="application/atom+xml" rel="alternate" title="I exist as I am Feed">
<link rel="author" href="https://plus.google.com/u/0/116380333940951424604/posts?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://jared.ottleys.net/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="http://jared.ottleys.net/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->

<script src="http://jared.ottleys.net/assets/js/modernizr.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://jared.ottleys.net/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://jared.ottleys.net/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://jared.ottleys.net/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://jared.ottleys.net/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://jared.ottleys.net/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://jared.ottleys.net/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div id="outer-wrap">
<div id="inner-wrap">

    <header id="top" role="banner">
        <div class="block">
            <h1 class="block-title">I exist as I am</h1>
            <a class="nav-btn" id="nav-open-btn" href="#nav">Navigation</a>
        </div>
    </header>

    <nav id="nav" role="navigation">
        <div class="block">
            <h2 class="block-title">Chapters</h2>
            <ul>
                
				<li><a href="http://jared.ottleys.net/" >Home</a></li>
		        
				<li><a href="http://jared.ottleys.net/about/" >About</a></li>
		        
				<li><a href="http://jared.ottleys.net/articles/" >Articles</a></li>
		        
		        <li><a href="http://jared.ottleys.net/feed.xml" title="Atom/RSS feed">Feed</a>
            </ul>
            <a class="close-btn" id="nav-close-btn" href="#top">Return to Content</a>
        </div>
    </nav>



<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <div class="article-author-side">
    <img src="http://jared.ottleys.net/images/photo.JPG" class="bio-photo" alt="Jared Ottley bio photo"></a>
<h3>Jared Ottley</h3>
<p>Jared Ottley is an engineer at <a href='http://www.alfresco.com'>Alfresco</a>.  As the father of 6 he is raising a geek army. He has a degree in Political Science and drives a Mini.</p>
<a href="mailto:jared@ottleys.net" class="author-social"><i class="icon-mail"></i> jared@ottleys.net</a>
<a href="http://twitter.com/jottley" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://facebook.com/jottley" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>
<a href="https://plus.google.com/u/0/116380333940951424604/posts" class="author-social" target="_blank"><i class="icon-google-plus"></i> Google+</a>
<a href="http://linkedin.com/in/jottley" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://instagram.com/jaredrottley" class="author-social" target="_blank"><i class="icon-instagram"></i> Instagram</a>
<a href="http://github.com/jottley" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<a href="http://lastfm.com/user/jottley" class="author-social" target="_blank"><i class="icon-lastfm"></i> Last.fm</a>
<a href="http://www.flickr.com/photos/jottley" class="author-social" target="_blank"><i class="icon-flickr"></i> Flickr</a>

  </div>
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      <h1 itemprop="name">Alfresco&#58; CMIS Browser Binding DELETE example</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->
    <div class="article-wrap" itemprop="text">
      <p>I’m in the midst of rewriting a CMIS client. We are moving from CMIS 1.0 atompub bindings to CMIS 1.1 browser bindings. I’ve worked out how to do a DELETE and wanted to document an example that others could extrapolate from.
<br /><br />
A browser binding DELETE should follow the model of a form POST according to the documentation. Playing around with the provided examples (there were no DELETE examples that I found doing a quick google search) I found it to be a simpler than a form POST. I should also note that these calls are governed by the <a href="http://en.wikipedia.org/wiki/Same-origin_policy" title="Same Origin Policy">same origin policy</a> so you’ll need to use either JSON-P<a href="http://en.wikipedia.org/wiki/JSONP" title="JSONP">2</a> or a CORS<a href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharing" title="Cross-origin resource sharing">3</a> enabled server<a href="http://www.slideshare.net/jottley/cors-enable-alfresco-for-cors" title="CORS enable Alfresco">4</a> to enable building applications against the CMIS enabled repository.
<br /><br />
<em>I’m using curl for my examples.</em>
<br /><br />
There are two ways to address the object that you want to delete: using the objectId or by path.
### Using objectId
To delete by objectId we need to include the ‘objectId=’ parameter along with cmis objectId (ex. 7ab93c6a-9520-40dd-be74-bae52f4bd6ca;1.0).</p>

<div class="highlight"><pre><code class="bash"><span class="p">&amp;</span><span class="nv">objectId</span><span class="o">=</span>7ab93c6a-9520-40dd-be74-bae52f4bd6ca<span class="p">;</span>1.0
</code></pre></div>

<h3 id="by-path">By Path</h3>
<p>To delete by path you need to include the full path in the URL. There is no need to include the objectId in the by path call as the path has precedence over the objectId</p>

<div class="highlight"><pre><code class="bash">Sites/internal2/documentLibrary/test.txt
</code></pre></div>

<p>Now with the basics of addressing the document or folder under our belt we can pull together the rest of the call.
<br /><br />
With the atompub binding we made a delete using the HTTP DELETE method. With the browser binding a delete is made using the HTTP POST method. To indicate our call is a delete we add the ‘cmisaction=’ parameter with a value of delete to our call.</p>

<div class="highlight"><pre><code class="bash"><span class="nv">cmisaction</span><span class="o">=</span>delete
</code></pre></div>

<p>A full objectId call (made against Alfresco Cloud) would use a URL like the following:</p>

<div class="highlight"><pre><code class="bash">https://api.alfresco.com/ottleys.net/public/cmis/versions/1.1/browser/root?cmisaction<span class="o">=</span>delete<span class="p">&amp;</span><span class="nv">objectId</span><span class="o">=</span>804f6300-38cd-48a4-86db-499f58497ae5<span class="p">;</span>1.0
</code></pre></div>

<p>The same call using a path:</p>

<div class="highlight"><pre><code class="bash">https://api.alfresco.com/ottleys.net/public/cmis/versions/1.1/browser/root/Sites/internal2/documentLibrary/test.txt?cmisaction<span class="o">=</span>delete
</code></pre></div>

<p>Using the objectId example from above a call using curl against the Alfresco Cloud Public API would look like:</p>

<div class="highlight"><pre><code class="bash">curl -X POST <span class="s2">&quot;https://api.alfresco.com/ottleys.net/public/cmis/versions/1.1/browser/root?cmisaction=delete&amp;objectId=804f6300-38cd-48a4-86db-499f58497ae5;1.0&quot;</span> --header <span class="s2">&quot;Authorization:Bearer 42b8c319-344c-4273-b94c-b4c23482be6b&quot;</span> -IL
</code></pre></div>

<p>(For those unfamiliar with curl I’ve added the -IL options to the command so that I can see details about the response (not including the body).</p>

<h3 id="what-about-response-codes">What about response codes?</h3>
<p>With atompub a successful delete would have resulted in a 204 response code and no response body. With the browser bindings a 200 response code is returned still with no body. (My preference would be that it returned a 204. This would keep consistency across the bindings and would match what I believe is proper DELETE response.)
<br /><br />
And response codes for Errors? You still see a 401 when a user needs to authenticate and a 404 if the object can’t be found. All other errors that I saw came back as 409s. This includes locked documents and folders containing children. If you receive a 409 result there are two json values you can look at to find the reason for the error: exception (the short description) and message (a fuller description of the error).</p>


      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          <img src="http://jared.ottleys.net/images/photo.JPG" class="bio-photo" alt="Jared Ottley bio photo"></a>
<h3>Jared Ottley</h3>
<p>Jared Ottley is an engineer at <a href='http://www.alfresco.com'>Alfresco</a>.  As the father of 6 he is raising a geek army. He has a degree in Political Science and drives a Mini.</p>
<a href="mailto:jared@ottleys.net" class="author-social"><i class="icon-mail"></i> jared@ottleys.net</a>
<a href="http://twitter.com/jottley" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://facebook.com/jottley" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>
<a href="https://plus.google.com/u/0/116380333940951424604/posts" class="author-social" target="_blank"><i class="icon-google-plus"></i> Google+</a>
<a href="http://linkedin.com/in/jottley" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://instagram.com/jaredrottley" class="author-social" target="_blank"><i class="icon-instagram"></i> Instagram</a>
<a href="http://github.com/jottley" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<a href="http://lastfm.com/user/jottley" class="author-social" target="_blank"><i class="icon-lastfm"></i> Last.fm</a>
<a href="http://www.flickr.com/photos/jottley" class="author-social" target="_blank"><i class="icon-flickr"></i> Flickr</a>

        </div>
        <p class="byline"><strong>Alfresco&#58; CMIS Browser Binding DELETE example</strong> was published on <time datetime="2014-04-14T00:00:00-06:00" itemprop="datePublished">April 14, 2014</time> by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name"><a href="http://jared.ottleys.net/about" title="About Jared Ottley" itemprop="url">Jared Ottley</a></span></span>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://jared.ottleys.net/articles">View all articles</a>)</small></h4>
    <ul>
    
      
      
        
          
        
      
      
      <li><a href="http://jared.ottleys.net/alfresco/alfresco-property-decorators-cont" title="Alfresco: Property Decorators &#8212; cont.">Alfresco: Property Decorators &#8212; cont.</a></li>
      
    
      
      
        
          
        
      
      
      <li><a href="http://jared.ottleys.net/alfresco/alfresco-simple-workflow-web-scripts" title="Alfresco: Simple Workflow Web Scripts">Alfresco: Simple Workflow Web Scripts</a></li>
      
    
      
      
        
          
        
      
      
      <li><a href="http://jared.ottleys.net/alfresco/alfresco-simple-workflow" title="Alfresco: Simple Workflow">Alfresco: Simple Workflow</a></li>
      
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    <span>&copy; 2014 Jared Ottley. The thoughts here are my own and are not my employers...so blame me.</span>
  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://jared.ottleys.net/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://jared.ottleys.net/assets/js/scripts.min.js"></script>
<script src="http://jared.ottleys.net/assets/js/main.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-73397-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
	        

</body>
</html>
